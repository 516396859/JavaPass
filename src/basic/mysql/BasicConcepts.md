---
title: MySQL 基础
icon: file
order: 1
author: Ms.Cheney
date: 2023-10-16
PageView: true
lastUpdated: true
category:
    - MySQL数据库
copyright: false
footer: 赣ICP备2023007682 | 使用 <a href="https://theme-hope.vuejs.press/zh/" target="_blank">VuePress Theme Hope</a> 主题 | MIT 协议, 版权所有 © 2023-Cheney,2018-present Mr.Hope
# 版权声明：本文为JavaPass博主「javapass.cn」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
---
### 0. 数据库三范式:star::star::star::two:
- 第一范式：要求属性具有原子性，不可再分
- 第二范式：对记录的唯一性约束，也就是主键约束，要求记录非主属性都依赖于主键。
- 第三范式：对字段冗余性的约束，也就是外键约束，任何字段不能由其他字段派生出来。

**题评：** 暂无
::: details 点击查看详细答案
待补充
:::

### 1. 为什么不推荐使用外键与级联？:star::star::one:
增加了复杂性，每次删除与更新都必须考虑到外键。增加了额外工作，数据库需要增加维护外键的工作。对分库分表不友好，分库分表外键无法生效。
什么是存储过程?

**题评：** 无
::: details 点击查看详细答案
待补充
:::

### 2. 什么是存储过程?:star::star::one:
存储过程看成是一些 `SQL` 语句的集合，可以类比成代码中的方法，还可以传递参数进行调用。好处是使用存储过程比单纯 `SQL` 语句执行要快，因为存储过程是预编译过的。不过由于调试和扩展，没有移植性很少用了。

**题评：** 无
::: details 点击查看详细答案
待补充
:::

### 3. 数据库设计通常分为哪几步?:star::star::star::one:
分析需求，然后画出`ER`图，再将`ER`图转为表，然后写`SQL`建表，测试运行维护

**题评：** 无
::: details 点击查看详细答案
待补充
:::

### 4. `SQL`语句可以分为哪几类？:star::star::one:
- `DDL`，数据定义语言，对数据库的操作负责数据结构定义与数据库对象的定义；
- `DML`，数据操纵语言，对数据库具体表的操作；

**题评：** 无
::: details 点击查看详细答案
待补充
:::

### 5. `UNION` 和 `UNION` `ALL` 的区别？:star::star::star::two:
他们都是将两个或更多查询的结果组合起来，并生成一个结果集。所有查询的列数和列顺序必须相同。通常返回的列名取自第一个查询。但是前者并起来会去重，后者不会去重。

**题评：** 无
::: details 点击查看详细答案
待补充
:::

### 6. 介绍一下索引（`INDEX`）？:star::star::one:
加速查找数据库的一个排好序的数据结构，大大加速数据库字段的查找速度；再具体讲下：主键索引、唯一性索引、联合索引、普通索引等等；

**题评：** 无
::: details 点击查看详细答案
待补充
:::

### 7. `MySQL`的事务处理知道吗？:star::star::star::two:
`MySQL` 默认是隐式提交，每执行一条语句就把这条语句当成一个事务然后进行提交。当出现 `START` `TRANSACTION` 语句时，会关闭隐式提交；当 `COMMIT``或 `ROLLBACK`语句执行后，事务会自动关闭，重新恢复隐式提交。对于`delete`和`update`等语句才会事务回滚，对于`select`语句不能回滚。自动提交可以通过 `set` `autocommit`=`0` 可以取消自动提交。

**题评：** 无
::: details 点击查看详细答案
待补充
:::

### 8. `MySQL`的触发器知道吗？:star::star::star::one:
触发器是当操作表记录时`(`增删改`)`触发的一种操作，可以在增删改之前或者之后触发。

**题评：** 无
::: details 点击查看详细答案
待补充
:::

### 9. 什么是视图？:star::star::one:
视图是一种虚拟表，视图不存储实际数据，而是从基础表中获取数据，提供数据的不同视角。可以对视图进行增删改查等等，但是不影响到真实的表，其他和表的操作一样，主要区别：
- 本身不存储数据，只是查找数据进行展示；
- 不能建立索引，无法使用索引；

**题评：** 无
::: details 点击查看详细答案
待补充
:::

### 10. `DML` 语句和 `DDL` 语句区别？:star::star::one:
- `DML`数据操作语言，主要对数据库中表记录的增删改查，开发人员经常使用；
- `DDL`数据定义语言，对数据库内部对象操作的语言—对表进行定义修改删除等，例如表的定义，结构修改；一般数据管理员使用；

**题评：** 无
::: details 点击查看详细答案
待补充
:::

### 11. `MySQL`数据库引擎有哪些？:star::star::star::star::three:
`Innodb`，`MyISAM`；行级锁、表级锁；回滚和崩溃恢复能力有无；支持事务不支持事务，支持外键不支持外键；并发能力强差；自动增长有无；

**题评：** 无
::: details 点击查看详细答案
待补充
:::

### 12. 说说`InnoDB`与`MyISAM`的区别？:star::star::star::three:
现在的`MySQL`数据库默认使用`InnoDB`引擎，`InnoDB`默认使用行锁，锁的粗细度更细，而`MyISAM`只支持表锁。另外，`InnoDB`支持数据库崩溃恢复、事务回滚和外键；而`MyISAM`都不支持，但是`MyISAM`会保存整个表的行数而`InnoDB`会执行`select` `count` 全表扫描。 

**题评：** 无
::: details 点击查看详细答案
待补充
:::

### 13. `SQL`优化手段有哪些？:star::star::two:
- 查询`select` 后面跟着字段而不是*号
- 尽可能减少子查询，使用关联查询替代
- `where`后的字段尽可能是建立索引的字段
- `where`后面的字段不要进行运算或者函数操作

**题评：** 无
::: details 点击查看详细答案
待补充
:::

### 14. 简单说一说`drop`、`delete`与`truncate`的区别？:star::star::star::two:
- `drop`：`DDL`操作，删除整张表数据和结构
- `truncate`：`DDL`操作，删除表全部数据保留表结构
- `delete`：`DML`操作，删除一行记录，可以事务回滚；

**题评：** 无
::: details 点击查看详细答案
待补充
:::

### 15. 并发事务带来哪些问题?  :star::star::star::star::three:
- 脏读：读到了未提交的数据
- 不可重复读：一个事务中两次读取同一个数据前后不一致
- 幻读：一个事务中前后两次读到的记录数量不一致
- 修改丢失：两个事务同时读取某个记录并修改，只有后面的修改才能生效，被覆写

**题评：** 无
::: details 点击查看详细答案
待补充
:::

### 16. 不可重复读和幻读区别？:star::star::star::two:
不可重复读是一个事务中前后两次读取到的数据不一致，幻读是前后两次读到的记录数量不一致，可不重复读是因为中途有其他事务进行了修改，而幻读是中途有事务进行了插入或者删除。

**题评：** 无
::: details 点击查看详细答案
待补充
:::

### 17. 事务隔离级别有哪些?:star::star::star::star::three:
- 读未提交：会导致脏读；
- 读已提交：不会脏读但是会导致不可重复读、和幻读；
- 可重复读：会导致幻读；
- 可串行化：最高隔离级别，效率很低；

**题评：** 无
::: details 点击查看详细答案
待补充
:::

### 18. `MySQL`的默认隔离级别是?:star::star::star::three:
`InnoDB` 存储引擎默认隔离级别是可重复读，但是已经可以完全保证事务的隔离性要求，即达到了 `SQL`标准的可串行化隔离级别。因为使用的是`Next`-`Key` `Lock` 锁算法，可以避免幻读的产生。

**题评：** 这里的`Next`-`Key` `Lock` 临键锁在后面会讲到！
::: details 点击查看详细答案
待补充
:::

### 19. 大表如何优化？:star::star::star::three:
- 禁止查询的时候不带任何限制条件
- 读写分离，主库写，从库读
- 垂直分区：将表按照业务分库；水平分区：将表按照某个字段的类别进行分库。

**题评：** 无
::: details 点击查看详细答案
待补充
:::

### 20. 分库分表之后,`id` 主键如何处理？:star::star::star::two:
分库分表之后，数据不在同一台服务器上，而是分布式存储在不同的机器上，因此需要使用分布式`ID`进行重建主键：
- 推特的雪花算法，时间戳+机器码+序列号组成
- `redis` `incr`生成有序`ID`，性能好，缺点是容易被猜测到增长规则

**题评：** 无
::: details 点击查看详细答案
待补充
:::

### 21. 说说在 `MySQL` 中一条查询 `SQL` 是如何执行的？:star::star::three:
- 客户端通过连接器建立连接，包括权限认证
- 查询缓存，以查询语句为`key`，不过`8`.`0`默认关闭了
- 分析器：词法分析，语法分析
- 优化器：生成执行计划，选择最优索引
- 执行器：操作引擎，执行`SQL`，返回结果

**题评：** 无
::: details 点击查看详细答案
待补充
:::

### 22. 一条`SQL`语句的执行顺序？:star::star::star::four:
`select` * `from` `A` `left` `join` `B` `on` `xxx` `where` `Axx` `group` `by` `xx` `order` `by` `xx` `limit`；
`from` --> `join` --> `on` --> `where` --> `groupby` --> `having` --> `select` --> `distinct` --> `order` `by` --> `limit` 

**题评：** 无
::: details 点击查看详细答案
待补充
:::

### 23. 什么是临时表，何时删除临时表？:star::star::star::two:
临时表是执行`SQL`语句的过程中产生的临时存储一些中间结果的表，只对当前连接可见，当断开连接时自动释放所有临时表空间。在进行子查询的时候会建立临时表，频繁建立销毁临时表非常消耗资源，因此使用子查询效率很低。

**题评：** 无
::: details 点击查看详细答案
待补充
:::

### 24. `MySQL`的常用索引:star::star::star::star::two:
`B`+ 树 和 哈希索引

**题评：** 可能需要展开细说！
::: details 点击查看详细答案
待补充
:::

### 25. `MySQL` 中 `varchar` 与 `char` 的区别？`varchar(30)` 中的 `30`代表的涵义？:star::star::star::star::three:
- `char`是固定长度，多出的部分使用空格填充；`varchar`是可变长度存储实际的长度；
- `char`最多存储`255`个字符数，`varchar`可以存储`6`万多个字符；
- 在查询效率方面，因为`char`是固定长度不需要额外的长度检查，因此比`varchar`要快很多。

**题评：** 无
::: details 点击查看详细答案
待补充
:::

### 26. 为什么 `SELECT` `COUNT(`*`)` `FROM` `table` 在 `InnoDB` 比`MyISAM` 慢？:star::star::star::one:
因为在`MyISAM`引擎中内部维护一个计数器统计表的记录数，而`InnoDB`每次都需要全表扫描计数。

**题评：** 无
::: details 点击查看详细答案
待补充
:::

### 27. `count(1)`、`count(`*`)`和`count(`列名`)`的区别？:star::star::star::star::four:
- 在`MySQL`中，`count(1)`和`count()`都可以用来统计行数。它们的区别在于，`count(1)`是基于`1`这个常量进行统计，而`count()`则是统计所有行。但是，这两种方式的性能是相同的，因为在执行时，`MySQL`会对所有行进行遍历，而无论是基于`1`还是*，每行都会被统计一次。
- `count(`列名`)`是基于某一列进行统计的方式。在进行统计时，`MySQL`会跳过该列为`NULL`的行，因此它的统计结果可能会小于表中的总行数。因此，当统计某一列非`NULL`值的数量时，可以使用`count(`列名`)`。
- 当列名是主键时，`count(`列名`)`和`count()`的性能是相同的，因为主键列不允许出现`NULL`值。但是，当列名不是主键时，使用`count()`会比`count(`列名`)`更快，因为`MySQL`不需要检查该列是否为`NULL`。

**题评：** 无
::: details 点击查看详细答案
待补充
:::

### 28. 为什么禁止使用 `SELECT` * 必须使用 `SELECT` <字段列表> 查询？:star::star::star::star::three:
消耗更多的`IO`和网络带宽资源，无法使用覆盖索引，使用字段可以减少表结构带来的影响。

**题评：** 无
::: details 点击查看详细答案
待补充
:::

### 29. 子查询性能差的原因？:star::star::star::three:
子查询无法使用索引，子查询会创建临时表，临时表不存在索引；临时表创建与销毁会消耗过多的资源导致大量慢查询。

**题评：** 无
::: details 点击查看详细答案
待补充
:::

### 30. 说说什么是 `MVCC`？:star::star::star::star::star::four:
多版本的意思就是数据库中同时存在多个版本的数据，并不是整个数据库的多个版本，而是某一条记录的多个版本同时存在，在某个事务对其进行操作的时候，需要查看这一条记录的隐藏列事务版本`id`，比对事务`id`并根据事物隔离级别去判断读取哪个版本的数据。

**题评：** 无
::: details 点击查看详细答案
待补充
:::

### 31. `MVCC` 可以为数据库解决什么问题？:star::star::star::star::five:
- `MVCC`在`MySQL` `InnoDB`中的实现主要是为了提高数据库并发性能，用更好的方式去处理读-写冲突，做到即使有读写冲突时，也能做到不加锁，非阻塞并发读
- 我们都知道并发访问数据库造成的四种问题（脏写（修改丢失）、脏读、不可重复读、幻读），`MVCC`就是在尽量减少锁使用的情况下高效避免这些问题

**题评：** 无
::: details 点击查看详细答案
待补充
:::

### 32. 请说说 `MySQL` 数据库的锁？:star::star::star::two:
- 共享锁：读锁，允许多个用户同时读取数据；`share` `model`
- 互斥锁：写锁，一个资源被写锁操作时不运行其他操作进行。`for` `update`
- 表锁：`MyISAM`使用表锁，开销小但并发低；
- 行锁：`InnoDB`默认行锁，行锁必须依赖与索引，高并发度；

**题评：** 无
::: details 点击查看详细答案
待补充
:::

### 33. 说说什么是锁升级？:star::star::star::star::three:
- 数据库中的锁升级指的是：`InnoDB`中行锁是加在索引上的，如果不走索引的话就会升级为表锁。原因是`InnoDB`是将主键和相关的索引放在`B`+树的叶子节点上。
- 当非唯一索引中某索引字段的内容如果相同的大于整个表的`1`/`2`则升级为表锁，此时走索引比全文检索还慢，因此在优化器中不会走索引，因此就是使用表锁；

**题评：** 无
::: details 点击查看详细答案
待补充
:::

### 34. 主键与索引有什么区别？:star::star::star::three:
- 主键可以作为索引，但索引不能作为主键
- 主键不能为`null`且唯一，唯一性索引可以为空
- 主键只能有一个，但索引可以有多个
- 主键是一种约束，索引是一种查询数据的数据结构

**题评：** 无
::: details 点击查看详细答案
待补充
:::

### 35. 自增主键一定是连续的吗?:star::star::star::three:
不一定，自增主键的值放在了`redo` `log`中，提供了持久化的能力；但是如果强行跳跃插入`id`值也会导致`id`值跳跃；如果出现了回滚，那么自增主键为了提高性能不会回滚。

**题评：** 无
::: details 点击查看详细答案
待补充
:::

### 36. `MySQL` 存储引擎架构了解吗？:star::star::star::two:
`MySQL`采用的是插件式架构，支持多种存储引擎；存储引擎是基于表的而不是数据库的，甚至可以为不同的表设置不同的存储引擎以适应不同的场景需要 ，并且还可以更具提供的存储引擎接口编写属于自己的存储引擎。
 

**题评：** 无
::: details 点击查看详细答案
待补充
:::

